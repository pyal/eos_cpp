
#include <stdio.h>  /* printf() used by parser   if set ZUBR_DEBUG */
#include <stdlib.h> /* getenv() used by parser for test ZUBR_DEBUG */

#define not_defined_zubr_sccsid   1

#define ZUBR_KOSTELTSEV_ZUBR 1
#ifndef not_defined_zubr_sccsid
static char zubr_sccsid[] = "@(#)zubrpar 3.0.0b Andre V.Kosteltsev 19/03/99";
#endif

int zubr_parse();

#line 7 "main.y"

#include "init.h"
#include "symtab.h"
#include "mathf.h"
#include "code.h"
#include "main.h"

#define code2(c1,c2) code(c1); code(c2)
#define code3(c1,c2,c3) code(c1); code(c2); code(c3)

int indef;

#line 21 "main.y"
typedef union
{
   SYMBOL *sym;
   INST   *inst;
   int     narg;
} ZUBR_STYPE;
#line 35 "main.c"

#define NUMBER 257
#define VAR 258
#define BLTIN 259
#define UNDEF 260
#define STRING 261
#define ADDEQ 262
#define SUBEQ 263
#define MULEQ 264
#define DIVEQ 265
#define PRINT 266
#define WHILE 267
#define IF 268
#define ELSE 269
#define FUNCTION 270
#define PROCEDURE 271
#define RETURN 272
#define FUNC 273
#define PROC 274
#define READ 275
#define ARG 276
#define OR 277
#define AND 278
#define GT 279
#define GE 280
#define LT 281
#define LE 282
#define EQ 283
#define NE 284
#define UNARYMINUS 285
#define NOT 286

#define ZUBR_ERRCODE 256

int zubr_lhs[] =
{
    -1,     0,     0,     0,     0,     0,     0,     0,     2,     2,
     2,     2,     2,     2,     3,     3,     3,     3,     3,     3,
     3,     3,     3,     6,     7,     8,     9,    10,     4,     4,
     4,     1,     1,     1,     1,     1,     1,     1,     1,     1,
     1,     1,     1,     1,     1,     1,     1,     1,     1,     1,
     1,     1,     1,     1,     1,     5,     5,     5,     5,    14,
    13,    15,    13,    11,    11,    11,    12,    12,    12,
};

int zubr_len[] =
{
     2,     0,     2,     3,     3,     3,     3,     3,     3,     3,
     3,     3,     3,     3,     1,     1,     2,     5,     2,     4,
     4,     7,     3,     3,     1,     1,     0,     0,     0,     2,
     2,     1,     1,     1,     1,     5,     4,     4,     6,     3,
     3,     3,     3,     3,     3,     2,     3,     3,     3,     3,
     3,     3,     3,     3,     2,     1,     1,     3,     3,     0,
     6,     0,     6,     1,     1,     1,     0,     1,     3,
};

int zubr_defred[] =
{
     1,     0,     0,    31,     0,     0,     0,    24,    25,    26,
    26,     0,     0,     0,     0,     0,     0,     0,     2,     0,
    28,     0,     0,     0,     0,     0,     0,     7,     0,     0,
     0,     0,     0,     0,    56,     0,    34,     0,     0,     0,
     0,    63,    64,    65,    59,    61,     0,     0,     0,     0,
     0,     0,     0,     0,     0,     0,     0,     0,     0,     0,
     0,     0,     0,     0,     0,     6,     4,     5,     0,     0,
     0,     3,     0,     0,     0,     0,     0,     0,     0,     0,
     0,     0,     0,     0,     0,    44,    29,    22,     0,    30,
     0,     0,     0,     0,     0,     0,     0,     0,     0,     0,
     0,     0,     0,     0,    27,    27,    37,     0,    58,     0,
     0,     0,     0,     0,     0,    36,    23,    19,     0,     0,
    35,     0,    17,     0,     0,     0,    38,     0,    60,    62,
    27,    21,
};

int zubr_dgoto[] =
{
     1,    88,    36,    23,    51,    37,    69,    24,    25,    38,
   117,    44,   111,    26,    81,    82,
};

int zubr_sindex[] =
{
     0,   936,    -1,     0,   -60,   -13,   242,     0,     0,     0,
     0,   -33,  -247,  -247,   -12,   -22,   -33,   -33,     0,   -33,
     0,   121,    30,    31,     2,     2,    33,     0,   -33,   -33,
   -33,   -33,   -33,   -33,     0,  1172,     0,     1,     4,     6,
  1172,     0,     0,     0,     0,     0,  -211,   -33,   -46,   -46,
  1640,  1359,   -33,   -33,   -33,   -33,   -33,   -33,   -33,   -33,
   -33,   -33,   -33,   -33,   -33,     0,     0,     0,   -33,  1334,
  1334,     0,  1172,  1172,  1172,  1172,  1172,  1449,   404,   -33,
   -33,     9,    10,    11,  1172,     0,     0,     0,  1172,     0,
  1520,    43,   -39,   -39,   -39,   -39,   -39,   -39,   -37,   -37,
   -46,   -46,   -46,  1672,     0,     0,     0,   -33,     0,  1172,
  1172,   -27,   -26,    12,    13,     0,     0,     0,  -218,  1694,
     0,   -33,     0,  1334,  1334,  1334,     0,  1172,     0,     0,
     0,     0,
};

int zubr_rindex[] =
{
     0,     0,     0,     0,   -10,     0,     0,     0,     0,     0,
     0,   224,     0,     0,     0,    26,     0,     0,     0,     0,
     0,     0,  1475,     0,     0,     0,     0,     0,     0,     0,
     0,     0,     0,     0,     0,  1126,     0,  1282,     0,     0,
  1380,     0,     0,     0,     0,     0,     0,     0,    62,    98,
     0,     0,     0,     0,     0,     0,     0,     0,     0,     0,
     0,     0,     0,     0,     0,     0,     0,     0,     0,     0,
     0,     0,   970,  1002,  1044,  1076,  1203,     0,     0,   -25,
   -25,     0,     0,     0,  1240,     0,     0,     0,  1404,     0,
   914,   882,   512,   544,   600,   632,   720,   794,   438,   470,
   152,   188,   350,     0,     0,     0,     0,     0,     0,  1313,
   -19,     0,     0,     0,     0,     0,     0,     0,  1436,     0,
     0,     0,     0,     0,     0,     0,     0,   -15,     0,     0,
     0,     0,
};

int zubr_gindex[] =
{
     0,  1761,    55,   -49,     0,     0,    34,     0,     0,    48,
   -92,    47,   -18,     0,     0,     0,
};

#define ZUBR_TABLESIZE 1978
int zubr_table[] =
{
    32,    32,    89,    62,    60,    62,    61,    19,    63,    27,
    63,    41,    16,   118,   120,   122,    66,   121,   121,    66,
   104,   105,    67,    42,    43,    67,    68,    33,    46,    68,
    32,    32,    32,    32,    32,    32,    33,    32,   131,    47,
    66,    67,    68,    71,    79,    78,    80,    83,    64,   113,
   114,   125,   115,   123,   124,    64,    22,    64,    39,    70,
    45,     0,   112,     0,     0,     0,    33,    33,    33,    33,
    33,    33,    45,    33,   128,   129,   130,     0,     0,     0,
     0,     0,     0,     0,    32,    62,    60,     0,    61,     0,
    63,     0,     0,     0,     0,     0,     0,     0,     0,     0,
     0,     0,    45,    45,    45,    45,    45,    45,    54,    45,
     0,     0,     0,    32,     0,    32,     0,     0,     0,     0,
    33,     0,     0,     0,     0,     0,     0,     0,     0,     0,
     0,    65,     0,     0,     0,     0,     0,    64,    54,    54,
    54,    54,    54,    54,     0,    54,     0,     0,     0,    33,
     0,    33,     0,     0,     0,     0,     0,     0,     0,     0,
     0,     0,    41,    62,    60,     0,    61,     0,    63,     0,
     0,     0,     0,     0,     0,     0,     0,     0,     0,     0,
     0,     0,     0,     0,     0,    45,     0,    45,     0,     0,
     0,     0,    41,    41,    41,    41,    41,    41,    42,    41,
     0,     0,    28,    29,    30,    31,     0,     0,     0,     0,
     0,     0,     0,     0,     0,    64,     0,     0,     0,     0,
     0,    54,     0,    54,     3,     4,     5,     0,    42,    42,
    42,    42,    42,    42,    15,    42,     0,     9,     0,     0,
     0,     0,    14,    15,     0,     0,     0,    32,    32,    32,
     0,     0,     0,    17,     0,     0,    32,    32,    32,    32,
    32,    32,    32,     0,     0,    32,    32,    32,    32,    32,
    32,    32,    32,    32,    32,    41,    32,    41,     0,     0,
     0,     0,    19,    33,    33,    33,     0,    16,     0,     0,
     0,     0,    33,    33,    33,    33,    33,    33,    33,     0,
     0,    33,    33,    33,    33,    33,    33,    33,    33,    33,
    33,    42,    33,    42,     0,     0,     0,     0,     0,    45,
    45,    45,    54,    55,    56,    57,    58,    59,    45,    45,
    45,    45,    45,    45,    45,     0,     0,    45,    45,    45,
    45,    45,    45,    45,    45,    45,    45,    15,    45,    15,
     0,     0,     0,     0,     0,    54,    54,    54,     0,     0,
    43,     0,     0,     0,    54,    54,    54,    54,    54,    54,
    54,     0,     0,    54,    54,    54,    54,    54,    54,    54,
    54,    54,    54,     0,    54,     0,     0,     0,     0,     0,
    43,    43,    43,    43,    43,    43,     0,    43,    52,    53,
    54,    55,    56,    57,    58,    59,     0,     0,     0,    41,
    41,    41,     0,     0,     0,     0,     0,     0,    41,    41,
    41,    41,    41,    41,    41,     0,     0,    41,    41,    41,
    41,    41,    41,    41,    41,    41,    41,     0,    41,     0,
     0,     0,     0,     0,    19,    42,    42,    42,    39,    16,
     0,     0,     0,     0,    42,    42,    42,    42,    42,    42,
    42,     0,     0,    42,    42,    42,    42,    42,    42,    42,
    42,    42,    42,    43,    42,    43,     0,     0,    39,    39,
    40,    39,    39,    39,     0,     0,     0,     0,     0,     0,
    15,    15,    15,    15,     0,    15,    15,     0,     0,     3,
     4,     5,     0,    34,     0,     0,     0,     0,     0,     0,
    40,    40,     9,    40,    40,    40,     0,    14,    15,     0,
     0,     0,    46,     0,     0,     0,     0,     0,    17,     0,
     0,     0,     0,     0,     0,     0,     0,     0,     0,     0,
     0,     0,     0,     0,     0,     0,     0,     0,     0,     0,
     0,     0,    46,    46,    47,     0,    46,     0,     0,     0,
     0,    39,     0,    39,     0,     0,     0,     0,     0,     0,
     0,     0,     0,     0,     0,     0,     0,     0,     0,     0,
     0,     0,     0,     0,    47,    47,     0,     0,    47,     0,
     0,     0,     0,    40,     0,    40,     0,     0,     0,     0,
     0,     0,     0,     0,     0,     0,     0,    43,    43,    43,
    48,     0,     0,     0,     0,     0,    43,    43,    43,    43,
    43,    43,    43,     0,     0,    43,    43,    43,    43,    43,
    43,    43,    43,    43,    43,    46,    43,    46,     0,     0,
    48,    48,    49,     0,    48,     0,     0,     0,     0,     0,
     0,     0,     0,     0,     0,     0,     0,     0,     0,     0,
     0,     3,     4,     5,     0,   108,     0,    47,     0,    47,
     0,     0,    49,    49,     9,     0,    49,     0,     0,    14,
    15,     0,     0,     0,     0,     0,     0,     0,     0,     0,
    17,     0,     0,     0,     0,    39,    39,    39,     0,     0,
     0,     0,     0,     0,    39,    39,    39,    39,    39,    39,
    39,     0,     0,    39,    39,    39,    39,    39,    39,    39,
    39,    39,    39,    48,    39,    48,     0,    40,    40,    40,
    50,     0,     0,     0,     0,     0,    40,    40,    40,    40,
    40,    40,    40,     0,     0,    40,    40,    40,    40,    40,
    40,    40,    40,    40,    40,    49,    40,    49,     0,     0,
    50,    50,     0,     0,    50,     0,     0,     0,     0,    46,
    46,    46,     0,     0,     0,     0,     0,     0,    46,    46,
    46,    46,    46,    46,    46,     0,     0,    46,    46,    46,
    46,    46,    46,    46,    46,    46,    46,     0,    46,     0,
     0,    47,    47,    47,    51,     0,     0,     0,     0,     0,
    47,    47,    47,    47,    47,    47,    47,     0,     0,    47,
    47,    47,    47,    47,    47,    47,    47,    47,    47,     0,
    47,     0,     0,     0,    51,    51,     0,     0,    51,     0,
     0,     0,     0,    50,     0,    50,     0,     0,     0,     0,
     0,     0,     0,     0,     0,     0,     0,    48,    48,    48,
     0,     0,     0,     0,     0,     0,    48,    48,    48,    48,
    48,    48,    48,     0,     0,    48,    48,    48,    48,    48,
    48,    48,    48,    48,    48,     0,    48,     0,     0,    49,
    49,    49,    52,     0,     0,     0,     0,     0,    49,    49,
    49,    49,    49,    49,    49,     0,     0,    49,    49,    49,
    49,    49,    49,    49,    49,    49,    49,    51,    49,    51,
     0,     0,    52,    52,    53,     0,    52,     0,     0,     0,
     0,     0,     0,     0,     0,     0,     0,     0,     0,     0,
     0,     0,     0,     0,     0,     0,    18,     0,     0,     0,
     0,     0,     0,     0,    53,    53,     0,     0,    53,     0,
     0,     0,     0,     0,     0,     0,     0,     0,     0,     0,
     0,     0,     0,     0,     0,     0,    19,    50,    50,    50,
     9,    16,     0,     0,     0,     0,    50,    50,    50,    50,
    50,    50,    50,     0,     0,    50,    50,    50,    50,    50,
    50,    50,    50,    50,    50,    52,    50,    52,     0,     0,
     9,     9,    10,     0,     9,     0,     0,     0,     0,     0,
     0,     0,     0,     0,     0,     0,     0,     0,     0,     0,
     0,     0,     0,     0,     0,     0,     0,    53,     0,    53,
     0,     0,    10,    10,     0,     0,    10,     0,     0,     0,
     0,    51,    51,    51,    11,     0,     0,     0,     0,    20,
    51,    51,    51,    51,    51,    51,    51,     0,     0,    51,
    51,    51,    51,    51,    51,    51,    51,    51,    51,     0,
    51,     0,     0,     0,    11,    11,    12,     0,    11,     0,
     0,     0,     0,     9,     0,     9,     0,     0,     0,     0,
     0,     0,     0,     0,     0,     0,     0,     0,     0,     0,
     0,     0,     0,     0,     0,     0,    12,    12,     0,     0,
    12,     0,     0,     0,     0,    10,     0,    10,     0,     0,
     0,     0,     0,     0,     0,     0,    55,     0,     0,    52,
    52,    52,     0,     0,     0,     0,     0,     0,    52,    52,
    52,    52,    52,    52,    52,     0,     0,    52,    52,    52,
    52,     0,     0,     0,     0,     0,    55,    11,    52,    11,
    55,    53,    53,    53,     0,     0,     0,     0,     0,     0,
    53,    53,    53,    53,    53,    53,    53,     0,     0,    53,
    53,    53,     2,     3,     4,     5,     0,     0,     0,    12,
    53,    12,     6,     7,     8,     0,     9,    10,    11,    12,
    13,    14,    15,     8,    62,    60,     0,    61,     0,    63,
     0,     0,    17,     0,     0,     0,     0,     9,     9,     9,
     0,     0,     0,     0,     0,     0,     9,     9,     9,     9,
     9,     9,     9,     8,     8,     9,     9,     8,     0,    55,
    13,    55,     0,     0,     0,     0,     9,     0,     0,    10,
    10,    10,     0,     0,     0,     0,    64,     0,    10,    10,
    10,    10,    10,    10,    10,     0,     0,    10,    10,     0,
    13,    13,     0,     0,    13,     0,     0,     0,    10,     0,
     0,     0,    18,     0,     0,     0,     0,     0,     0,     0,
     0,    11,    11,    11,     0,     0,     0,     0,     0,     0,
    11,    11,    11,    11,    11,    11,    11,     0,     0,    11,
    11,     0,    18,    57,     0,     0,     8,    18,     8,     0,
    11,     0,     0,    12,    12,    12,     0,     0,     0,     0,
     0,     0,    12,    12,    12,    12,    12,    12,    12,     0,
     0,    12,    12,    57,     0,     0,     0,    57,     0,     0,
     0,     0,    12,    13,     0,    13,     0,     0,     0,    86,
     0,     0,     0,     0,    19,     0,     0,     0,     0,    16,
     0,     0,     0,    55,    55,    55,     0,     0,     0,     0,
    16,     0,    55,    55,    55,    55,    55,    55,    55,    19,
     0,    55,    55,     0,    16,    18,     0,    18,     0,     0,
     0,     0,    55,     0,    14,     0,     0,     0,     0,     0,
    16,     0,     0,     0,     0,     0,     0,     0,     0,     0,
     0,     0,     0,     0,     0,     0,    57,     0,    57,     0,
     0,     0,     0,     0,    14,     0,    20,     0,     0,    52,
    53,    54,    55,    56,    57,    58,    59,    20,     0,     0,
     8,     8,     8,     0,     0,     0,     0,     0,     0,     8,
     8,     8,     8,     8,     8,     8,    20,     0,     8,     8,
     0,    20,    20,     0,    87,     0,     0,     0,     0,     8,
   106,    62,    60,   107,    61,     0,    63,    13,    13,    13,
     0,     0,     0,    16,     0,    16,    13,    13,    13,    13,
    13,    13,    13,     0,     0,    13,    13,    34,    34,     0,
    34,     0,    34,     0,     0,     0,    13,    14,     0,    14,
     0,     0,     0,     0,     0,     0,     0,     0,     0,    18,
    18,    18,     0,    64,     0,     0,     0,     0,    18,    18,
    18,    18,    18,    18,    18,     0,     0,    18,    18,    20,
     0,    20,    62,    60,     0,    61,     0,    63,    18,    34,
    57,    57,    57,     0,     0,     0,     0,     0,     0,    57,
    57,    57,    57,    57,    57,    57,     0,     0,    57,    57,
     0,     3,     4,     5,     0,     0,     0,     0,     0,    57,
     6,     7,     8,     0,     9,    10,    11,     0,     0,    14,
    15,     0,     0,     0,    64,     0,     3,     4,     5,     0,
    17,     0,     0,     0,     0,     6,     7,     8,     0,     9,
    10,    11,     0,     0,    14,    15,     0,    16,    16,    16,
     0,     0,     0,     0,     0,    17,    16,    16,    16,    16,
    16,    16,    16,     0,     0,    16,    16,     0,     0,     0,
     0,    14,    14,    14,     0,     0,    16,     0,     0,     0,
    14,    14,    14,    14,    14,    14,    14,     0,     0,    14,
    14,    85,    62,    60,     0,    61,     0,    63,     0,     0,
    14,     0,     0,    20,    20,    20,     0,     0,     0,     0,
     0,     0,    20,    20,    20,     0,    20,    20,    20,     0,
     0,    20,    20,   116,    62,    60,     0,    61,     0,    63,
     0,     0,    20,     0,     0,     0,    52,    53,    54,    55,
    56,    57,    58,    59,    64,   126,    62,    60,     0,    61,
     0,    63,     0,     0,     0,     0,     0,     0,     0,     0,
     0,     0,    34,    34,    34,    34,    34,    34,    34,    34,
     0,     0,    21,     0,     0,     0,    64,    35,     0,     0,
     0,     0,    40,     0,     0,     0,     0,    48,    49,     0,
    50,     0,     0,     0,     0,     0,     0,     0,    64,    72,
    73,    74,    75,    76,    77,     0,     0,     0,    53,    54,
    55,    56,    57,    58,    59,     0,     0,     0,    84,     0,
     0,     0,     0,    90,    91,    92,    93,    94,    95,    96,
    97,    98,    99,   100,   101,   102,     0,     0,     0,   103,
     0,     0,     0,     0,     0,     0,     0,     0,     0,   109,
   110,   110,     0,     0,     0,     0,     0,     0,     0,     0,
     0,     0,     0,     0,     0,     0,     0,     0,     0,     0,
     0,     0,     0,     0,     0,     0,     0,     0,   119,     0,
     0,     0,     0,     0,     0,     0,     0,     0,     0,     0,
     0,     0,   127,     0,     0,     0,     0,     0,     0,     0,
     0,     0,     0,     0,     0,     0,     0,     0,     0,     0,
     0,     0,     0,     0,     0,     0,     0,     0,     0,     0,
     0,     0,     0,     0,     0,     0,     0,    52,    53,    54,
    55,    56,    57,    58,    59,     0,     0,     0,     0,     0,
     0,     0,     0,     0,     0,     0,     0,     0,     0,     0,
     0,     0,     0,     0,     0,     0,     0,     0,     0,    52,
    53,    54,    55,    56,    57,    58,    59,     0,     0,     0,
     0,     0,     0,     0,     0,     0,     0,     0,     0,     0,
     0,    52,    53,    54,    55,    56,    57,    58,    59,
};

int zubr_check[] =
{
    10,    61,    51,    42,    43,    42,    45,    40,    47,    10,
    47,   258,    45,   105,    41,    41,    41,    44,    44,    44,
    69,    70,    41,   270,   271,    44,    41,    40,    40,    44,
    40,    41,    42,    43,    44,    45,    10,    47,   130,    61,
    10,    10,    40,    10,    40,    44,    40,   258,    94,    40,
    40,   269,    41,    41,    41,    94,     1,    94,    10,    25,
    13,    -1,    80,    -1,    -1,    -1,    40,    41,    42,    43,
    44,    45,    10,    47,   123,   124,   125,    -1,    -1,    -1,
    -1,    -1,    -1,    -1,    94,    42,    43,    -1,    45,    -1,
    47,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
    -1,    -1,    40,    41,    42,    43,    44,    45,    10,    47,
    -1,    -1,    -1,   123,    -1,   125,    -1,    -1,    -1,    -1,
    94,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
    -1,    10,    -1,    -1,    -1,    -1,    -1,    94,    40,    41,
    42,    43,    44,    45,    -1,    47,    -1,    -1,    -1,   123,
    -1,   125,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
    -1,    -1,    10,    42,    43,    -1,    45,    -1,    47,    -1,
    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
    -1,    -1,    -1,    -1,    -1,   123,    -1,   125,    -1,    -1,
    -1,    -1,    40,    41,    42,    43,    44,    45,    10,    47,
    -1,    -1,   262,   263,   264,   265,    -1,    -1,    -1,    -1,
    -1,    -1,    -1,    -1,    -1,    94,    -1,    -1,    -1,    -1,
    -1,   123,    -1,   125,   257,   258,   259,    -1,    40,    41,
    42,    43,    44,    45,    10,    47,    -1,   270,    -1,    -1,
    -1,    -1,   275,   276,    -1,    -1,    -1,   257,   258,   259,
    -1,    -1,    -1,   286,    -1,    -1,   266,   267,   268,   269,
   270,   271,   272,    -1,    -1,   275,   276,   277,   278,   279,
   280,   281,   282,   283,   284,   123,   286,   125,    -1,    -1,
    -1,    -1,    40,   257,   258,   259,    -1,    45,    -1,    -1,
    -1,    -1,   266,   267,   268,   269,   270,   271,   272,    -1,
    -1,   275,   276,   277,   278,   279,   280,   281,   282,   283,
   284,   123,   286,   125,    -1,    -1,    -1,    -1,    -1,   257,
   258,   259,   279,   280,   281,   282,   283,   284,   266,   267,
   268,   269,   270,   271,   272,    -1,    -1,   275,   276,   277,
   278,   279,   280,   281,   282,   283,   284,   123,   286,   125,
    -1,    -1,    -1,    -1,    -1,   257,   258,   259,    -1,    -1,
    10,    -1,    -1,    -1,   266,   267,   268,   269,   270,   271,
   272,    -1,    -1,   275,   276,   277,   278,   279,   280,   281,
   282,   283,   284,    -1,   286,    -1,    -1,    -1,    -1,    -1,
    40,    41,    42,    43,    44,    45,    -1,    47,   277,   278,
   279,   280,   281,   282,   283,   284,    -1,    -1,    -1,   257,
   258,   259,    -1,    -1,    -1,    -1,    -1,    -1,   266,   267,
   268,   269,   270,   271,   272,    -1,    -1,   275,   276,   277,
   278,   279,   280,   281,   282,   283,   284,    -1,   286,    -1,
    -1,    -1,    -1,    -1,    40,   257,   258,   259,    10,    45,
    -1,    -1,    -1,    -1,   266,   267,   268,   269,   270,   271,
   272,    -1,    -1,   275,   276,   277,   278,   279,   280,   281,
   282,   283,   284,   123,   286,   125,    -1,    -1,    40,    41,
    10,    43,    44,    45,    -1,    -1,    -1,    -1,    -1,    -1,
   266,   267,   268,   269,    -1,   271,   272,    -1,    -1,   257,
   258,   259,    -1,   261,    -1,    -1,    -1,    -1,    -1,    -1,
    40,    41,   270,    43,    44,    45,    -1,   275,   276,    -1,
    -1,    -1,    10,    -1,    -1,    -1,    -1,    -1,   286,    -1,
    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
    -1,    -1,    40,    41,    10,    -1,    44,    -1,    -1,    -1,
    -1,   123,    -1,   125,    -1,    -1,    -1,    -1,    -1,    -1,
    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
    -1,    -1,    -1,    -1,    40,    41,    -1,    -1,    44,    -1,
    -1,    -1,    -1,   123,    -1,   125,    -1,    -1,    -1,    -1,
    -1,    -1,    -1,    -1,    -1,    -1,    -1,   257,   258,   259,
    10,    -1,    -1,    -1,    -1,    -1,   266,   267,   268,   269,
   270,   271,   272,    -1,    -1,   275,   276,   277,   278,   279,
   280,   281,   282,   283,   284,   123,   286,   125,    -1,    -1,
    40,    41,    10,    -1,    44,    -1,    -1,    -1,    -1,    -1,
    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
    -1,   257,   258,   259,    -1,   261,    -1,   123,    -1,   125,
    -1,    -1,    40,    41,   270,    -1,    44,    -1,    -1,   275,
   276,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
   286,    -1,    -1,    -1,    -1,   257,   258,   259,    -1,    -1,
    -1,    -1,    -1,    -1,   266,   267,   268,   269,   270,   271,
   272,    -1,    -1,   275,   276,   277,   278,   279,   280,   281,
   282,   283,   284,   123,   286,   125,    -1,   257,   258,   259,
    10,    -1,    -1,    -1,    -1,    -1,   266,   267,   268,   269,
   270,   271,   272,    -1,    -1,   275,   276,   277,   278,   279,
   280,   281,   282,   283,   284,   123,   286,   125,    -1,    -1,
    40,    41,    -1,    -1,    44,    -1,    -1,    -1,    -1,   257,
   258,   259,    -1,    -1,    -1,    -1,    -1,    -1,   266,   267,
   268,   269,   270,   271,   272,    -1,    -1,   275,   276,   277,
   278,   279,   280,   281,   282,   283,   284,    -1,   286,    -1,
    -1,   257,   258,   259,    10,    -1,    -1,    -1,    -1,    -1,
   266,   267,   268,   269,   270,   271,   272,    -1,    -1,   275,
   276,   277,   278,   279,   280,   281,   282,   283,   284,    -1,
   286,    -1,    -1,    -1,    40,    41,    -1,    -1,    44,    -1,
    -1,    -1,    -1,   123,    -1,   125,    -1,    -1,    -1,    -1,
    -1,    -1,    -1,    -1,    -1,    -1,    -1,   257,   258,   259,
    -1,    -1,    -1,    -1,    -1,    -1,   266,   267,   268,   269,
   270,   271,   272,    -1,    -1,   275,   276,   277,   278,   279,
   280,   281,   282,   283,   284,    -1,   286,    -1,    -1,   257,
   258,   259,    10,    -1,    -1,    -1,    -1,    -1,   266,   267,
   268,   269,   270,   271,   272,    -1,    -1,   275,   276,   277,
   278,   279,   280,   281,   282,   283,   284,   123,   286,   125,
    -1,    -1,    40,    41,    10,    -1,    44,    -1,    -1,    -1,
    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
    -1,    -1,    -1,    -1,    -1,    -1,    10,    -1,    -1,    -1,
    -1,    -1,    -1,    -1,    40,    41,    -1,    -1,    44,    -1,
    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
    -1,    -1,    -1,    -1,    -1,    -1,    40,   257,   258,   259,
    10,    45,    -1,    -1,    -1,    -1,   266,   267,   268,   269,
   270,   271,   272,    -1,    -1,   275,   276,   277,   278,   279,
   280,   281,   282,   283,   284,   123,   286,   125,    -1,    -1,
    40,    41,    10,    -1,    44,    -1,    -1,    -1,    -1,    -1,
    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
    -1,    -1,    -1,    -1,    -1,    -1,    -1,   123,    -1,   125,
    -1,    -1,    40,    41,    -1,    -1,    44,    -1,    -1,    -1,
    -1,   257,   258,   259,    10,    -1,    -1,    -1,    -1,   123,
   266,   267,   268,   269,   270,   271,   272,    -1,    -1,   275,
   276,   277,   278,   279,   280,   281,   282,   283,   284,    -1,
   286,    -1,    -1,    -1,    40,    41,    10,    -1,    44,    -1,
    -1,    -1,    -1,   123,    -1,   125,    -1,    -1,    -1,    -1,
    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
    -1,    -1,    -1,    -1,    -1,    -1,    40,    41,    -1,    -1,
    44,    -1,    -1,    -1,    -1,   123,    -1,   125,    -1,    -1,
    -1,    -1,    -1,    -1,    -1,    -1,    10,    -1,    -1,   257,
   258,   259,    -1,    -1,    -1,    -1,    -1,    -1,   266,   267,
   268,   269,   270,   271,   272,    -1,    -1,   275,   276,   277,
   278,    -1,    -1,    -1,    -1,    -1,    40,   123,   286,   125,
    44,   257,   258,   259,    -1,    -1,    -1,    -1,    -1,    -1,
   266,   267,   268,   269,   270,   271,   272,    -1,    -1,   275,
   276,   277,   256,   257,   258,   259,    -1,    -1,    -1,   123,
   286,   125,   266,   267,   268,    -1,   270,   271,   272,   273,
   274,   275,   276,    10,    42,    43,    -1,    45,    -1,    47,
    -1,    -1,   286,    -1,    -1,    -1,    -1,   257,   258,   259,
    -1,    -1,    -1,    -1,    -1,    -1,   266,   267,   268,   269,
   270,   271,   272,    40,    41,   275,   276,    44,    -1,   123,
    10,   125,    -1,    -1,    -1,    -1,   286,    -1,    -1,   257,
   258,   259,    -1,    -1,    -1,    -1,    94,    -1,   266,   267,
   268,   269,   270,   271,   272,    -1,    -1,   275,   276,    -1,
    40,    41,    -1,    -1,    44,    -1,    -1,    -1,   286,    -1,
    -1,    -1,    10,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
    -1,   257,   258,   259,    -1,    -1,    -1,    -1,    -1,    -1,
   266,   267,   268,   269,   270,   271,   272,    -1,    -1,   275,
   276,    -1,    40,    10,    -1,    -1,   123,    45,   125,    -1,
   286,    -1,    -1,   257,   258,   259,    -1,    -1,    -1,    -1,
    -1,    -1,   266,   267,   268,   269,   270,   271,   272,    -1,
    -1,   275,   276,    40,    -1,    -1,    -1,    44,    -1,    -1,
    -1,    -1,   286,   123,    -1,   125,    -1,    -1,    -1,    10,
    -1,    -1,    -1,    -1,    40,    -1,    -1,    -1,    -1,    45,
    -1,    -1,    -1,   257,   258,   259,    -1,    -1,    -1,    -1,
    10,    -1,   266,   267,   268,   269,   270,   271,   272,    40,
    -1,   275,   276,    -1,    45,   123,    -1,   125,    -1,    -1,
    -1,    -1,   286,    -1,    10,    -1,    -1,    -1,    -1,    -1,
    40,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
    -1,    -1,    -1,    -1,    -1,    -1,   123,    -1,   125,    -1,
    -1,    -1,    -1,    -1,    40,    -1,    10,    -1,    -1,   277,
   278,   279,   280,   281,   282,   283,   284,   123,    -1,    -1,
   257,   258,   259,    -1,    -1,    -1,    -1,    -1,    -1,   266,
   267,   268,   269,   270,   271,   272,    40,    -1,   275,   276,
    -1,    45,   123,    -1,   125,    -1,    -1,    -1,    -1,   286,
    41,    42,    43,    44,    45,    -1,    47,   257,   258,   259,
    -1,    -1,    -1,   123,    -1,   125,   266,   267,   268,   269,
   270,   271,   272,    -1,    -1,   275,   276,    42,    43,    -1,
    45,    -1,    47,    -1,    -1,    -1,   286,   123,    -1,   125,
    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,   257,
   258,   259,    -1,    94,    -1,    -1,    -1,    -1,   266,   267,
   268,   269,   270,   271,   272,    -1,    -1,   275,   276,   123,
    -1,   125,    42,    43,    -1,    45,    -1,    47,   286,    94,
   257,   258,   259,    -1,    -1,    -1,    -1,    -1,    -1,   266,
   267,   268,   269,   270,   271,   272,    -1,    -1,   275,   276,
    -1,   257,   258,   259,    -1,    -1,    -1,    -1,    -1,   286,
   266,   267,   268,    -1,   270,   271,   272,    -1,    -1,   275,
   276,    -1,    -1,    -1,    94,    -1,   257,   258,   259,    -1,
   286,    -1,    -1,    -1,    -1,   266,   267,   268,    -1,   270,
   271,   272,    -1,    -1,   275,   276,    -1,   257,   258,   259,
    -1,    -1,    -1,    -1,    -1,   286,   266,   267,   268,   269,
   270,   271,   272,    -1,    -1,   275,   276,    -1,    -1,    -1,
    -1,   257,   258,   259,    -1,    -1,   286,    -1,    -1,    -1,
   266,   267,   268,   269,   270,   271,   272,    -1,    -1,   275,
   276,    41,    42,    43,    -1,    45,    -1,    47,    -1,    -1,
   286,    -1,    -1,   257,   258,   259,    -1,    -1,    -1,    -1,
    -1,    -1,   266,   267,   268,    -1,   270,   271,   272,    -1,
    -1,   275,   276,    41,    42,    43,    -1,    45,    -1,    47,
    -1,    -1,   286,    -1,    -1,    -1,   277,   278,   279,   280,
   281,   282,   283,   284,    94,    41,    42,    43,    -1,    45,
    -1,    47,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
    -1,    -1,   277,   278,   279,   280,   281,   282,   283,   284,
    -1,    -1,     1,    -1,    -1,    -1,    94,     6,    -1,    -1,
    -1,    -1,    11,    -1,    -1,    -1,    -1,    16,    17,    -1,
    19,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    94,    28,
    29,    30,    31,    32,    33,    -1,    -1,    -1,   278,   279,
   280,   281,   282,   283,   284,    -1,    -1,    -1,    47,    -1,
    -1,    -1,    -1,    52,    53,    54,    55,    56,    57,    58,
    59,    60,    61,    62,    63,    64,    -1,    -1,    -1,    68,
    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    78,
    79,    80,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,   107,    -1,
    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
    -1,    -1,   121,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
    -1,    -1,    -1,    -1,    -1,    -1,    -1,   277,   278,   279,
   280,   281,   282,   283,   284,    -1,    -1,    -1,    -1,    -1,
    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,   277,
   278,   279,   280,   281,   282,   283,   284,    -1,    -1,    -1,
    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
    -1,   277,   278,   279,   280,   281,   282,   283,   284,
};

#define ZUBR_FINAL 1
#ifndef ZUBR_DEBUG
#define ZUBR_DEBUG 0
#endif
#define ZUBR_MAXTOKEN 286
#if ZUBR_DEBUG
char *zubr_name[] =
{
"end-of-file",0,0,0,0,0,0,0,0,0,"'\\n'",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,"'('","')'","'*'","'+'","','","'-'",0,"'/'",0,0,0,0,0,0,0,0,0,
0,0,0,0,"'='",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
"'^'",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"'{'",0,"'}'",0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,"NUMBER","VAR","BLTIN","UNDEF","STRING","ADDEQ","SUBEQ",
"MULEQ","DIVEQ","PRINT","WHILE","IF","ELSE","FUNCTION","PROCEDURE","RETURN",
"FUNC","PROC","READ","ARG","OR","AND","GT","GE","LT","LE","EQ","NE",
"UNARYMINUS","NOT",
};

char *zubr_rule[] =
{
"$accept : list",
"list :",
"list : list '\\n'",
"list : list defn '\\n'",
"list : list assign '\\n'",
"list : list stmt '\\n'",
"list : list expr '\\n'",
"list : list error '\\n'",
"assign : VAR '=' expr",
"assign : VAR ADDEQ expr",
"assign : VAR SUBEQ expr",
"assign : VAR MULEQ expr",
"assign : VAR DIVEQ expr",
"assign : ARG '=' expr",
"stmt : expr",
"stmt : RETURN",
"stmt : RETURN expr",
"stmt : PROCEDURE begin '(' arglist ')'",
"stmt : PRINT prlist",
"stmt : while cond stmt end",
"stmt : if cond stmt end",
"stmt : if cond stmt end ELSE stmt end",
"stmt : '{' stmtlist '}'",
"cond : '(' expr ')'",
"while : WHILE",
"if : IF",
"begin :",
"end :",
"stmtlist :",
"stmtlist : stmtlist '\\n'",
"stmtlist : stmtlist stmt",
"expr : NUMBER",
"expr : VAR",
"expr : ARG",
"expr : assign",
"expr : FUNCTION begin '(' arglist ')'",
"expr : READ '(' VAR ')'",
"expr : BLTIN '(' expr ')'",
"expr : BLTIN '(' expr ',' expr ')'",
"expr : expr '+' expr",
"expr : expr '-' expr",
"expr : expr '*' expr",
"expr : expr '/' expr",
"expr : expr '^' expr",
"expr : '(' expr ')'",
"expr : '-' expr",
"expr : expr GT expr",
"expr : expr GE expr",
"expr : expr LT expr",
"expr : expr LE expr",
"expr : expr EQ expr",
"expr : expr NE expr",
"expr : expr AND expr",
"expr : expr OR expr",
"expr : NOT expr",
"prlist : expr",
"prlist : STRING",
"prlist : prlist ',' expr",
"prlist : prlist ',' STRING",
"$$1 :",
"defn : FUNC procname $$1 '(' ')' stmt",
"$$2 :",
"defn : PROC procname $$2 '(' ')' stmt",
"procname : VAR",
"procname : FUNCTION",
"procname : PROCEDURE",
"arglist :",
"arglist : expr",
"arglist : arglist ',' expr",
};
#endif

#define     zubr_clearin    (zubr_char=(-1))
#define     zubr_errok      (zubr_errflag=0)
#ifdef  ZUBR_STACKSIZE
#ifndef ZUBR_MAXDEPTH
#define     ZUBR_MAXDEPTH   ZUBR_STACKSIZE
#endif
#else
#ifdef  ZUBR_MAXDEPTH
#define     ZUBR_STACKSIZE  ZUBR_MAXDEPTH
#else
#define     ZUBR_STACKSIZE  500
#define     ZUBR_MAXDEPTH   500
#endif
#endif

#if ZUBR_DEBUG
int            zubr_debug;
#endif
int            zubr_nerrs;
int            zubr_errflag;
int            zubr_char;
int           *zubr_ssp;

ZUBR_STYPE    *zubr_vsp;
ZUBR_STYPE     zubr_val;
ZUBR_STYPE     zubr_lval;

int            zubr_ss[ZUBR_STACKSIZE];

ZUBR_STYPE     zubr_vs[ZUBR_STACKSIZE];

#define        zubr_stacksize  ZUBR_STACKSIZE

#line 182 "main.y"

/********************  END OF GRAMMAR  ***********************/

char *progname;

FILE *input_file;
char *input_file_name;

int lineno = 0;


void warning( char *s, char *t )
{
   fprintf( stderr, "%s: %s", progname, s );
   if( t ) fprintf( stderr, " %s", t );
   fprintf( stderr, " near line %d\n", lineno );
}


void zubr_error( char *s )
{
   warning( s, (char *)0 );
}

int follow( int expect, int ifyes, int ifno )
{
   register FILE *f = input_file;
   register int   c;

   c = getc( f );

   if( c == expect ) return( ifyes );
   ungetc( c, f );
   return( ifno );
}

int backslash( int c )
{
   register FILE *f = input_file;
   static   char  tabl[] = "b\bf\fn\nr\rt\t";
   char *p = (char *)0;

   if( c != '\\' ) return( c );

   c = getc( f );
   p = (char *)strchr( tabl, c ); /* or strchr() */
   if( islower( c ) && p != (char *)0 )
      return( p[1] );
   return( c );
}


int zubr_lex( void )
{
   register FILE *f = input_file;
   register int   c;

//   lineno++;


   while( (c = getc( f )) == ' ' || c == '\t' || c == '\r' )
   ;
   if( c == EOF ) return( 0 );
   if ( c=='/') 
   {
    int n=getc(f);
	if (n=='/') { while ((c!='\n') && (c!=EOF)) c=getc(f); if (c=='\n') lineno++;return zubr_lex();}
	else 
	if (n=='*') { while (1) 
	     {
	      while (c!='*') {c=getc(f);if  (c==EOF) return 0; if (c=='\n') lineno++;} 
	      c=getc(f);
	      if (c=='/') return zubr_lex();
	      }}
	else ungetc(n,f);
	}
   
   if( c == '.' || isdigit( c ) )
   {
      double d = 0.0;
      int n = getc( f );

      /* моей функции scanf() нельзя отдавать число "." */
      if( c == '.' && !isdigit( n ) )
      {
         ungetc( n, f );
         zubr_lval.sym = install( "", NUMBER, d );
         return( NUMBER );
      }
      ungetc( n, f );

      /* number */
      ungetc( c, f );
      n = fscanf( f, "%lf", &d );
      zubr_lval.sym = install ("", NUMBER, d);

      return( NUMBER );
   }
   if( isalpha( c ) )
   {
      SYMBOL *sp;
      char sbuf[256], *p = sbuf;

      do
      {
         *p++ = c;
      } while( (c=getc( f )) != EOF && (isalnum( c )||c=='_') );

      ungetc( c, f );
      *p = '\0';

      if( (sp = lookup( sbuf ) ) == (SYMBOL *)0 )
         sp = install( sbuf, UNDEF, 0.0 );
      zubr_lval.sym = sp;

      return( sp->type == UNDEF ? VAR : sp->type );
   }

   if( c == '$' )
   {
      int n = 0;

      while( isdigit( c = getc( f ) ) )
         n = 10 * n + c - '0';
      ungetc( c, f );

      if( n == 0 )
         warning( "strange $...", (char *)0 );
      zubr_lval.narg = n;

      return( ARG );
   }

   if( c == '"' )
   {
      SYMBOL *sp;
      char sbuf[256], *p;

      for( p =sbuf; (c = getc( f )) != '"'; p++ )
      {
         if( c == '\n' || c == EOF )
            warning( "missing quote", "\"" );
         if( p >= sbuf + sizeof( sbuf ) - 1 )
         {
            *p = '\0';
            warning( "string too long", sbuf );
         }
         *p = backslash( c );
      }
      *p = '\0';

      zubr_lval.sym = (SYMBOL *)emalloc( strlen( sbuf ) + 1 );
      strcpy( (char *)zubr_lval.sym, sbuf );

      return( STRING );
   }

   if( c == '\n' ) { lineno++; return( c ); }


   switch( c )
   {
      case '+': return follow( '=', ADDEQ, '+' );
      case '-': return follow( '=', SUBEQ, '-' );
      case '*': return follow( '=', MULEQ, '*' );
      case '/': return follow( '=', DIVEQ, '/' );

      case '>': return follow( '=', GE,   GT );
      case '<': return follow( '=', LE,   LT );
      case '=': return follow( '=', EQ,  '=' );
      case '!': return follow( '=', NE,  NOT );
      case '|': return follow( '|', OR,  '|' );
      case '&': return follow( '&', AND, '&' );

      default : return( c );
   }

}

void SetProcedure(char *name,int narg,double *par)
{
	int k;
	for (k=0;k<narg;k++)
	{
		code( (INST)constpush );
		code( (INST) install( "", NUMBER, par[k] ) );
	}
	code( (INST)call );
	code((INST)(lookup(name)));
	code( (INST)narg ); 
};
void SetVariable(char *name,double val)
{
SYMBOL *sp;
    if( (sp = lookup( name ) ) == (SYMBOL *)0 )
         sp = install( name, VAR, val );
    else {sp->type=VAR;sp->u.val=val;}
//PrintSymbols(sp);    
	code( (INST)varpush );
	code( (INST) sp );
	code( (INST)eval );

}
void ReadProgram(char *name )
{
//   progname = argv[0];

   input_file_name = name;

   if( (input_file = fopen( input_file_name, "rb" )) == NULL )
   {
      printf( "Cannot open file: %s\n", input_file_name );
      exit( 1 );
   }

   init();
   for( initcode(); zubr_parse(); initcode() )
   {
      execute( progbase );
   }


   if( input_file ) fclose( input_file );

   return( 1 );
}
void Execute()
{
	execute(progbase);
}
int main1( int argc, char *argv[] )
{
double par[1];par[0]=5;
	ReadProgram(argv[1]);
//	SetVariable("test_var",100);
	SetVariable("test_var",1000.54634);
	SetProcedure("test",1,&par[0]);
	Execute();
	


   return( 0 );
}

/*******************  END OF FILE MAIN.Y  *********************/
#line 937 "main.c"

#define ZUBR_ABORT     goto zubr_abort
#define ZUBR_ACCEPT    goto zubr_accept
#define ZUBR_NEWERROR  goto zubr_newerror
#define ZUBR_ERROR     goto zubr_errlab


int zubr_parse()
{
   register int zubr_m, zubr_n, zubr_state;
#if ZUBR_DEBUG
   register char *zubr_s;

   if( zubr_s = getenv("ZUBR_DEBUG") )
   {
      zubr_n = *zubr_s;
      if( zubr_n >= '0' && zubr_n <= '9' ) zubr_debug = zubr_n - '0';
   }
#endif

   zubr_nerrs   = 0;
   zubr_errflag = 0;
   zubr_char    = (-1);

   zubr_ssp     = zubr_ss;
   zubr_vsp     = zubr_vs;
  *zubr_ssp     = zubr_state = 0;

zubr_loop:
   if( zubr_n = zubr_defred[zubr_state] ) goto zubr_reduce;
   if( zubr_char < 0 )
   {
      if( (zubr_char = zubr_lex()) < 0 ) zubr_char = 0;
#if ZUBR_DEBUG
      if( zubr_debug )
      {
         zubr_s = 0;
         if( zubr_char <= ZUBR_MAXTOKEN ) zubr_s = zubr_name[zubr_char];
         if( !zubr_s ) zubr_s = "illegal-symbol";
         printf( "zubr_debug: state %d, reading %d (%s)\n",
                 zubr_state, zubr_char, zubr_s );
      }
#endif
   } /*  End if( zubr_char < 0 )  */

   if( (zubr_n = zubr_sindex[zubr_state]) && (zubr_n += zubr_char) >= 0 &&
       zubr_n <= ZUBR_TABLESIZE && zubr_check[zubr_n] == zubr_char )
   {
#if ZUBR_DEBUG
      if( zubr_debug )
         printf( "zubr_debug: state %d, shifting to state %d\n",
                 zubr_state, zubr_table[zubr_n] );
#endif
      if( zubr_ssp >= zubr_ss + zubr_stacksize - 1 )
      {
         goto zubr_overflow;
      }
      *++zubr_ssp = zubr_state = zubr_table[zubr_n];
      *++zubr_vsp = zubr_lval;
      zubr_char = (-1);
      if( zubr_errflag > 0 ) --zubr_errflag;
      goto zubr_loop;
   }

   if( (zubr_n = zubr_rindex[zubr_state]) && (zubr_n += zubr_char) >= 0 &&
       zubr_n <= ZUBR_TABLESIZE && zubr_check[zubr_n] == zubr_char )
   {
      zubr_n = zubr_table[zubr_n];
      goto zubr_reduce;
   }
   if (zubr_errflag) goto zubr_inrecovery;
#ifdef not_defined_zubr_sccsid
   goto zubr_newerror;
#endif
zubr_newerror:
   zubr_error( "syntax error" );
#ifdef not_defined_zubr_sccsid
   goto zubr_errlab;
#endif
zubr_errlab:
   ++zubr_nerrs;
zubr_inrecovery:
   if( zubr_errflag < 3 )
   {
      zubr_errflag = 3;
      for( ;; )
      {
         if( (zubr_n = zubr_sindex[*zubr_ssp]) && (zubr_n += ZUBR_ERRCODE) >= 0 &&
             zubr_n <= ZUBR_TABLESIZE && zubr_check[zubr_n] == ZUBR_ERRCODE )
         {
#if ZUBR_DEBUG
            if( zubr_debug )
               printf( "zubr_debug: state %d, error recovery shifting\
 to state %d\n", *zubr_ssp, zubr_table[zubr_n] );
#endif
            if( zubr_ssp >= zubr_ss + zubr_stacksize - 1 )
            {
               goto zubr_overflow;
            }
            *++zubr_ssp = zubr_state = zubr_table[zubr_n];
            *++zubr_vsp = zubr_lval;
            goto zubr_loop;
         }
         else
         {
#if ZUBR_DEBUG
            if( zubr_debug )
               printf( "zubr_debug: error recovery discarding state %d\n",
                       *zubr_ssp );
#endif
            if( zubr_ssp <= zubr_ss ) goto zubr_abort;
            --zubr_ssp;
            --zubr_vsp;
         }
      } /*  End of for( ;; )  */
   } /*  End if( zubr_errflag < 3 )  */
   else
   {
      if( zubr_char == 0 ) goto zubr_abort;
#if ZUBR_DEBUG
      if( zubr_debug )
      {
         zubr_s = 0;
         if( zubr_char <= ZUBR_MAXTOKEN ) zubr_s = zubr_name[zubr_char];
         if( !zubr_s ) zubr_s = "illegal-symbol";
printf( "zubr_debug: state %d, error recovery discards token %d (%s)\n",
        zubr_state, zubr_char, zubr_s );
      }
#endif
      zubr_char = (-1);
      goto zubr_loop;
   }
zubr_reduce:
#if ZUBR_DEBUG
   if( zubr_debug )
      printf( "zubr_debug: state %d, reducing by rule %d (%s)\n",
              zubr_state, zubr_n, zubr_rule[zubr_n] );
#endif
   zubr_m   = zubr_len[zubr_n];
   zubr_val = zubr_vsp[1-zubr_m];

   switch( zubr_n )
   {
      case 4:
#line 52 "main.y"
         { code2( (INST)void_pop, STOP ); return( 1 ); }
         break;
      case 5:
#line 53 "main.y"
         { code ( STOP );                 return( 1 ); }
         break;
      case 6:
#line 54 "main.y"
         { code2( (INST)print, STOP );    return( 1 ); }
         break;
      case 7:
#line 56 "main.y"
         {
            zubr_errok;
         }
         break;
      case 8:
#line 61 "main.y"
         { code3( (INST)varpush, (INST)zubr_vsp[-2].sym, (INST)assign ); }
         break;
      case 9:
#line 62 "main.y"
         { code3( (INST)varpush, (INST)zubr_vsp[-2].sym, (INST)Yaddeq ); }
         break;
      case 10:
#line 63 "main.y"
         { code3( (INST)varpush, (INST)zubr_vsp[-2].sym, (INST)Ysubeq ); }
         break;
      case 11:
#line 64 "main.y"
         { code3( (INST)varpush, (INST)zubr_vsp[-2].sym, (INST)Ymuleq ); }
         break;
      case 12:
#line 65 "main.y"
         { code3( (INST)varpush, (INST)zubr_vsp[-2].sym, (INST)Ydiveq ); }
         break;
      case 13:
#line 67 "main.y"
         { defnonly( "$" ); code2( (INST)argassign, (INST)zubr_vsp[-2].narg ); zubr_val.inst = zubr_vsp[0].inst; }
         break;
      case 14:
#line 70 "main.y"
         { code( (INST)pop ); }
         break;
      case 15:
#line 72 "main.y"
         { defnonly( "return" ); code( (INST)procret ); }
         break;
      case 16:
#line 74 "main.y"
         { defnonly( "return" ); zubr_val.inst = zubr_vsp[0].inst; code( (INST)funcret ); }
         break;
      case 17:
#line 76 "main.y"
         { zubr_val.inst = zubr_vsp[-3].inst; code3( (INST)call, (INST)zubr_vsp[-4].sym, (INST)zubr_vsp[-1].narg ); }
         break;
      case 18:
#line 77 "main.y"
         { zubr_val.inst = zubr_vsp[0].inst; }
         break;
      case 19:
#line 79 "main.y"
         {
            (zubr_vsp[-3].inst)[1] = (INST)zubr_vsp[-1].inst; /* тело цикла */
            (zubr_vsp[-3].inst)[2] = (INST)zubr_vsp[0].inst; /* end */
         }
         break;
      case 20:
#line 84 "main.y"
         {
            (zubr_vsp[-3].inst)[1] = (INST)zubr_vsp[-1].inst; /* часть then */
            (zubr_vsp[-3].inst)[3] = (INST)zubr_vsp[0].inst; /* end */
         }
         break;
      case 21:
#line 89 "main.y"
         {
            (zubr_vsp[-6].inst)[1] = (INST)zubr_vsp[-4].inst; /* часть then */
            (zubr_vsp[-6].inst)[2] = (INST)zubr_vsp[-1].inst; /* часть else */
            (zubr_vsp[-6].inst)[3] = (INST)zubr_vsp[0].inst; /* end */
         }
         break;
      case 22:
#line 94 "main.y"
         { zubr_val.inst = zubr_vsp[-1].inst; }
         break;
      case 23:
#line 97 "main.y"
         { code( STOP ); zubr_val.inst = zubr_vsp[-1].inst; }
         break;
      case 24:
#line 100 "main.y"
         { zubr_val.inst = code3( (INST)whilecode, STOP, STOP ); }
         break;
      case 25:
#line 104 "main.y"
         {
            zubr_val.inst = code( (INST)ifcode );
            code3( STOP, STOP, STOP );
         }
         break;
      case 26:
#line 110 "main.y"
         { zubr_val.inst = pprog; }
         break;
      case 27:
#line 113 "main.y"
         { code( STOP ); zubr_val.inst = pprog; }
         break;
      case 28:
#line 116 "main.y"
         { zubr_val.inst = pprog; }
         break;
      case 31:
#line 121 "main.y"
         { code2( (INST)constpush, (INST)zubr_vsp[0].sym ); }
         break;
      case 32:
#line 122 "main.y"
         { code3( (INST)varpush, (INST)zubr_vsp[0].sym, (INST)eval ); }
         break;
      case 33:
#line 124 "main.y"
         { defnonly( "$" ); zubr_val.inst = code2( (INST)arg, (INST)zubr_vsp[0].narg ); }
         break;
      case 34:
#line 125 "main.y"
         { code3( (INST)varpush, (INST)zubr_vsp[0].inst, (INST)eval ); }
         break;
      case 35:
#line 127 "main.y"
         { zubr_val.inst = zubr_vsp[-3].inst; code3( (INST)call, (INST)zubr_vsp[-4].sym, (INST)zubr_vsp[-1].narg ); }
         break;
      case 36:
#line 129 "main.y"
         { zubr_val.inst = code2( (INST)varread, (INST)zubr_vsp[-1].sym ); }
         break;
      case 37:
#line 130 "main.y"
         { code2( (INST)bltin, (INST)zubr_vsp[-3].sym->u.ptr); }
         break;
      case 38:
#line 132 "main.y"
         {
            code2( (INST)bltin2, (INST)zubr_vsp[-5].sym->u.ptr );
         }
         break;
      case 39:
#line 135 "main.y"
         { code( (INST)Yadd );   }
         break;
      case 40:
#line 136 "main.y"
         { code( (INST)Ysub );   }
         break;
      case 41:
#line 137 "main.y"
         { code( (INST)Ymul );   }
         break;
      case 42:
#line 139 "main.y"
         { code( (INST)Ydiv );   }
         break;
      case 43:
#line 141 "main.y"
         { code( (INST)power );  }
         break;
      case 44:
#line 142 "main.y"
         { zubr_val.inst =  zubr_vsp[-1].inst; }
         break;
      case 45:
#line 143 "main.y"
         { code( (INST)negate ); }
         break;
      case 46:
#line 144 "main.y"
         { code( (INST)gt );     }
         break;
      case 47:
#line 145 "main.y"
         { code( (INST)ge );     }
         break;
      case 48:
#line 146 "main.y"
         { code( (INST)lt );     }
         break;
      case 49:
#line 147 "main.y"
         { code( (INST)le );     }
         break;
      case 50:
#line 148 "main.y"
         { code( (INST)eq );     }
         break;
      case 51:
#line 149 "main.y"
         { code( (INST)ne );     }
         break;
      case 52:
#line 150 "main.y"
         { code( (INST)and );    }
         break;
      case 53:
#line 151 "main.y"
         { code( (INST)or );     }
         break;
      case 54:
#line 152 "main.y"
         { zubr_val.inst = zubr_vsp[0].inst; code( (INST)not ); }
         break;
      case 55:
#line 155 "main.y"
         { code( (INST)prexpr ); }
         break;
      case 56:
#line 156 "main.y"
         { zubr_val.inst = code2( (INST)prstr, (INST)zubr_vsp[0].sym ); }
         break;
      case 57:
#line 157 "main.y"
         { code( (INST)prexpr ); }
         break;
      case 58:
#line 158 "main.y"
         { zubr_val.inst = code2( (INST)prstr, (INST)zubr_vsp[0].sym ); }
         break;
      case 59:
#line 162 "main.y"
         { zubr_vsp[0].sym->type = FUNCTION; indef = 1; }
         break;
      case 60:
#line 164 "main.y"
         { code( (INST)funcret ); defin( zubr_vsp[-4].sym ); indef = 0; }
         break;
      case 61:
#line 166 "main.y"
         { zubr_vsp[0].sym->type = PROCEDURE; indef = 1; }
         break;
      case 62:
#line 168 "main.y"
         { code( (INST)procret ); defin( zubr_vsp[-4].sym ); indef = 0; }
         break;
      case 66:
#line 176 "main.y"
         { zubr_val.narg = 0; }
         break;
      case 67:
#line 177 "main.y"
         { zubr_val.narg = 1; }
         break;
      case 68:
#line 178 "main.y"
         { zubr_val.narg = zubr_vsp[-2].narg + 1; }
         break;
#line 1338 "main.c"

   } /*  End of switch( zubr_n )  */

   zubr_ssp   -=  zubr_m;
   zubr_state  = *zubr_ssp;
   zubr_vsp   -=  zubr_m;
   zubr_m      =  zubr_lhs[zubr_n];

   if( zubr_state == 0 && zubr_m == 0 )
   {
#if ZUBR_DEBUG
      if( zubr_debug )
         printf( "zubr_debug: after reduction, shifting from state 0 to\
 state %d\n", ZUBR_FINAL );
#endif
      zubr_state  = ZUBR_FINAL;
      *++zubr_ssp = ZUBR_FINAL;
      *++zubr_vsp = zubr_val;
      if( zubr_char < 0 )
      {
         if( (zubr_char = zubr_lex()) < 0 ) zubr_char = 0;
#if ZUBR_DEBUG
         if( zubr_debug )
         {
            zubr_s = 0;
            if( zubr_char <= ZUBR_MAXTOKEN) zubr_s = zubr_name[zubr_char];
            if( !zubr_s ) zubr_s = "illegal-symbol";
            printf( "zubr_debug: state %d, reading %d (%s)\n",
                    ZUBR_FINAL, zubr_char, zubr_s);
         }
#endif
      }
      if( zubr_char == 0 ) goto zubr_accept;
      goto zubr_loop;
   } /*  End if( zubr_state == 0 && zubr_m == 0 )  */

   if( (zubr_n = zubr_gindex[zubr_m]) && (zubr_n += zubr_state) >= 0 &&
       zubr_n <= ZUBR_TABLESIZE && zubr_check[zubr_n] == zubr_state )
      zubr_state = zubr_table[zubr_n];
   else
      zubr_state = zubr_dgoto[zubr_m];
#if ZUBR_DEBUG
   if( zubr_debug )
      printf( "zubr_debug: after reduction, shifting from state %d \
to state %d\n", *zubr_ssp, zubr_state );
#endif
   if( zubr_ssp >= zubr_ss + zubr_stacksize - 1 )
   {
      goto zubr_overflow;
   }
   *++zubr_ssp = zubr_state;
   *++zubr_vsp = zubr_val;
   goto zubr_loop;
zubr_overflow:
   zubr_error( "zubr stack overflow" );
zubr_abort:
   return( 1 );
zubr_accept:
   return( 0 );
}
